(function(g){g.fn.getTumblrPosts=function(i){g.views.helpers({getHostname:function(){return TUMBLR_HOSTNAME},getTintedAudioPlayer:function(c,a){var b=c.data.player;return null!=a?(a=a.split("#")[1],b.replace(/color=FFFFFF/g,"color="+a)):b},getPhotoURL:function(a,e){for(var b=a.data.alt_sizes,f="",d=0;d<b.length;d++)if(b[d].width>=e)f=b[d].url;else break;return""===f?b[0].url:f},getPhotoOrientation:function(a){a=a.data.original_size;return a.width>a.height?"landscape":a.width<a.height?"portrait":"square"},
getVideoEmbed:function(a,e){for(var b=a.data.player,f="",d=0;d<b.length;d++)if(b[d].width<=e)f=b[d].embed_code;else break;return""===f?b[0].embed_code:f}});var a=g.extend({hostname:TUMBLR_HOSTNAME,id:null,type:"",tag:"",limit:20,offset:0,format:"",template:"",before:null,done:null,always:null},i),h=this;return this.each(function(){""!=a.type&&(a.type="/"+a.type);var c="http://api.tumblr.com/v2/blog/"+a.hostname+"/posts"+a.type+"?api_key="+TUMBLR_API_KEY,e="";a.id?c+="&id="+parseInt(a.id):(a.tag&&
(c+="&tag="+encodeURI(a.tag)),a.limit&&(c+="&limit="+parseInt(a.limit)),e=c,a.offset&&(c+="&offset="+parseInt(a.offset)));g.ajax({url:c,dataType:"jsonp",jsonp:"jsonp",ifModified:!0,beforeSend:function(){typeof a.before==="function"&&a.before.call(h)}}).done(function(b,c,d){g.each(b.response.posts,function(){h.append(g(a.template!=""?a.template:"#tmpl-"+this.type).render(this))});typeof a.done==="function"&&a.done.call(h,b,c,d,e)}).always(function(b,c){h.find(".tumblr-api-loading").hide();typeof a.always===
"function"&&a.always.call(h,b,c,e)})})}})(jQuery,window);